<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

  Please write a code which will convert this html to json, you should combine 'p' tags with class 's1' into one question and there should be only 4 answers,
  finally i should get json like this

  [
    {
      "id": 1,
      "correctAnswer": "Answer 2 Second part of answer 2 Third part of answer 2 Forth part of answer 2",
      "incorrectAnswers": ["Answer 1", "Answer 3 Second part of answer 3", "Answer 4"],
      "question": {
        "text": "First part of question Second part?"
      }
    },
    {
      "id": 2,
      "correctAnswer": "Answer 111",
      "incorrectAnswers": ["Answer 222", "Answer 333", "Answer 444"],
      "question": {
        "text": "My question."
      }
    }
  ]


  <ul>
    <!-- THIS IS 1 -->
    <li data-list-text="1.">
      <!-- THIS 2 'p' WITH 'class="s1"' TAGS ARE QUESTION OF -->
      <p class="s1" style="padding-top: 14pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">First part of question</p>
      <p class="s1" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Second part?</p>

      <ul id="l2">
         <!-- THIS 4 'li' WITH 'data-list-text="•"' TAGS ARE ANSWERS OF -->
        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">Answer 1</p>
        </li>

        <!-- THIS 'li' IS CORRECT ANSWER BECAUSE HERE IS PRESENT 'background-color: #FF0;' -->
        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">
            <span class="s2" style=" background-color: #FF0;">Answer 2</span>
            <span class="p"> </span>
            <span class="s2" style=" background-color: #FF0;">Second part of answer 2 </span>
            <span class="p"> </span>
            <span class="s2" style=" background-color: #FF0;">Third part of answer 2 </span>
            <span class="p"> </span><span class="s2" style=" background-color: #FF0;">Forth part of answer 2</span>
          </p>
        </li>

        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 41pt;text-indent: -12pt;text-align: left;">Answer 3</p>
          <p style="padding-left: 29pt;text-indent: 0pt;text-align: left;">Second part of answer 3</p>
        </li>

        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">Answer 4</p>
        </li>
      </ul>
    </li>

    <!-- THIS IS 2 -->
    <li data-list-text="2.">
      <!-- THIS 'p' WITH 'class="s1"' TAG ARE QUESTION OF -->
      <p class="s1" style="padding-top: 14pt;padding-left: 20pt;text-indent: -15pt;text-align: left;">My question.</p>

      <!-- THIS 4 'li' WITH 'data-list-text="•"' TAGS ARE ANSWERS OF -->
      <ul id="l3">

        <!-- THIS 'li' IS CORRECT ANSWER BECAUSE HERE IS PRESENT 'background-color: #FF0;' -->
        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 41pt;text-indent: -12pt;text-align: left;">
            <span class="s2" style=" background-color: #FF0;">Answer 111</span>
          </p>
        </li>

        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 41pt;text-indent: -12pt;text-align: left;">Answer 222</p>
        </li>

        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 41pt;text-indent: -12pt;text-align: left;">Answer 333</p>
        </li>

        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 41pt;text-indent: -12pt;text-align: left;">Answer 444</p>
        </li>
      </ul>
    </li>
  </ul>
</body>
</html>


const htmlContent = `
<ul>
    <li data-list-text="1.">
      <p class="s1" style="padding-top: 14pt;padding-left: 5pt;text-indent: 0pt;text-align: left;">First part of question</p>
      <p class="s1" style="padding-left: 5pt;text-indent: 0pt;text-align: left;">Second part?</p>

      <ul id="l2">
        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">Answer 1</p>
        </li>

        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">
            <span class="s2" style=" background-color: #FF0;">Answer 1</span>
            <span class="p"> </span>
            <span class="s2" style=" background-color: #FF0;">Second part of answer 2 </span>
            <span class="p"> </span>
            <span class="s2" style=" background-color: #FF0;">Third part of answer 2 </span>
            <span class="p"> </span><span class="s2" style=" background-color: #FF0;">Forth part of answer 2</span>
          </p>
        </li>

        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 41pt;text-indent: -12pt;text-align: left;">Answer 3</p>
          <p style="padding-left: 29pt;text-indent: 0pt;text-align: left;">Second part of answer 3</p>
        </li>

        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 29pt;text-indent: 0pt;text-align: left;">Answer 4</p>
        </li>
      </ul>
    </li>

    <li data-list-text="2.">
      <p class="s1" style="padding-top: 14pt;padding-left: 20pt;text-indent: -15pt;text-align: left;">My question.</p>

      <ul id="l3">

        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 41pt;text-indent: -12pt;text-align: left;">
            <span class="s2" style=" background-color: #FF0;">Answer 111</span>
          </p>
        </li>

        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 41pt;text-indent: -12pt;text-align: left;">Answer 222</p>
        </li>

        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 41pt;text-indent: -12pt;text-align: left;">Answer 333</p>
        </li>

        <li data-list-text="•">
          <p style="padding-top: 14pt;padding-left: 41pt;text-indent: -12pt;text-align: left;">Answer 444</p>
        </li>
      </ul>
    </li>
  </ul>
`
const parser = new DOMParser()
const htmlDoc = parser.parseFromString(htmlContent, 'text/html')

const questions = []

const lis = htmlDoc.querySelectorAll('ul > li')
let id = 1

lis.forEach((li) => {
  const questionTextElements = li.querySelectorAll('.s1')
  const correctAnswerElement = li.querySelectorAll('.s2')
  const incorrectAnswerElements = Array.from(li.querySelectorAll('ul[id^="l"] > li > p'))

  if (questionTextElements && correctAnswerElement && incorrectAnswerElements.length > 0) {
    let questionText, correctAnswer

    questionTextElements.forEach((q) => {
      questionText += q.textContent.trim().replace(/\n\s+/g, ' ')
    })

    questionTextElements.forEach((a) => {
      correctAnswer += a.textContent.trim().replace(/\n\s+/g, ' ')
    })

    const incorrectAnswers = incorrectAnswerElements
      .filter((answer) => answer !== correctAnswerElement && !answer.querySelector('.s2'))
      .map((p) => p.textContent.trim().replace(/\n\s+/g, ' '))

    const question = {
      id: id++,
      correctAnswer: correctAnswer,
      incorrectAnswers: incorrectAnswers,
      question: {
        text: questionText
      }
    }

    questions.push(question)
  }
})

console.log(JSON.stringify(questions, null, 2))
